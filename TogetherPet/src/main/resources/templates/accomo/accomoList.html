<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>ë°˜ë ¤ë™ë¬¼ìˆ™ë°•ì—…ì²´</title>
<style>
#row gy-2 gx-3 align-items-center {
	position: absolute;
}
</style>
</head>
<body>
	<article layout:fragment="content">
	<br> <br> <br> <br>
		<!--shop  area start-->
		<div class="shop_section shop_reverse">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 col-md-12">

						<!--breadcrumbs area start-->
						<div class="breadcrumb_content" style="margin: 50px;">
							<ul>
								<li><a href="index.html">home</a></li>
								<li>Petinfo</li>
								<li>AccomoList</li>
							</ul>
						</div>
						<!--breadcrumbs area end-->


						<script>
	document.addEventListener('DOMContentLoaded', function() {
		var token = $("meta[name='_csrf']").attr("content");
		var header = $("meta[name='_csrf_header']").attr("content");
		// í•„í„°ë§
		// ë°°ë„ˆë¥¼ í´ë¦­í–ˆì„ ë•Œ ë°°ë„ˆ ê°’ì´ë‘ ì¹´í…Œê³ ë¦¬ ê°’ì´ë‘ ë‹¤ë¥´ë©´ display:none ìŠ¤íƒ€ì¼ ì¶”ê°€
		$('#category').on('click', 'button', function() {
			let filter = $(this).data('filter');
			let categories = $('.category') // <div> íƒœê·¸ ë°°ì—´
			
			for(category of categories){ 
				category.style='';
				if(filter == 'ALL'){
					category.style='';
				}else if(category.getAttribute('data-category') != filter){
					category.style.display='none';
				}
			}
		})
		
	})
</script>


						<!-- ì¹´í…Œê³ ë¦¬ ì‹œì‘  -->

						<div id="category"
							class="blog_messonry_button d-flex justify-content-center"
							style="margin-top: 100px;">

							<button class="active" data-filter="ALL">
								<img
									src="https://img.icons8.com/sf-regular-filled/50/1A1A1A/a.png" /><br>ì „ì²´
							</button>

							<button data-filter="Gyeongbuk">
								<img
									src="https://previews.123rf.com/images/captainvector/captainvector1705/captainvector170514290/79156597-%EB%B6%88%EA%B5%AD%EC%82%AC.jpg"
									width="100" height="100" /><br>ê²½ë¶
							</button>

							<button data-filter="gyeonggido">
								<img
									src="https://previews.123rf.com/images/captainvector/captainvector1705/captainvector170514002/79156016-%ED%95%9C%EA%B5%AD-%EB%AF%BC%EC%86%8D%EC%B4%8C.jpg"
									width="100" height="100" /><br>ê²½ê¸°ë„
							</button>

							<button data-filter="Chungnam">
								<img
									src="https://previews.123rf.com/images/captainvector/captainvector1705/captainvector170514599/79156947-%EC%84%B8%EC%A2%85-%EB%AC%B8%ED%99%94-%ED%9A%8C%EA%B4%80.jpg"
									width="100" height="100" /><br>ì¶©ì²­ë‚¨ë„
							</button>


							<button data-filter="Gyeongnam">
								<img
									src="https://images.cdn3.stockunlimited.net/preview1300/national-palace-museum_2013629.jpg"
									width="100" height="100" /><br>ê²½ìƒë‚¨ë„
							</button>

							<br>

							<button data-filter="Jeju">
								<img
									src="https://st4.depositphotos.com/18288972/20331/v/450/depositphotos_203318712-stock-illustration-beautiful-attraction-jeju-island-south.jpg"
									width="100" height="100" /><br>ì œì£¼ë„
							</button>


							<button data-filter="Gangwondo">
								<img
									src="https://images.cdn2.stockunlimited.net/preview1300/national-folk-museum_2013016.jpg"
									width="100" height="100" /><br>ê°•ì›ë„
							</button>


							<button data-filter="Incheon">
								<img
									src="https://previews.123rf.com/images/captainvector/captainvector1705/captainvector170513760/79155634-%EA%B5%AD%EB%A6%BD-%EB%B0%95%EB%AC%BC%EA%B4%80.jpg"
									width="100" height="100" /><br>ì¸ì²œ
							</button>

							<button data-filter="Busan">
								<img
									src="https://previews.123rf.com/images/captainvector/captainvector1705/captainvector170514571/79156889-%EB%B2%A1-%EC%8B%9C%EC%8A%A4%EC%BD%94.jpg"
									width="100" height="100" /><br>ë¶€ì‚°
							</button>


						</div>


						<!-- ì¹´í…Œê³ ë¦¬ ë  -->

						<div class="shop_banner d-flex align-items-center"
							data-bgimg="assets/img/bg/acco1.jpg">
							<div class="shop_banner_text"></div>
						</div>


						<!--shop  area start-->
						<div class="shop_section shop_reverse">

							<div class="container">
								<div class="row">
									<div class="col-lg-12 col-md-12">

										<h1>ë°˜ë ¤ë™ë¬¼ ë™ë°˜ê°€ëŠ¥ ìˆ™ì†Œ</h1>
										<h2>í˜¼ì ë‘ì§€ ë§ˆì„¸ìš” , ì´ì œ í•¨ê»˜ ë– ë‚˜ìš”ğŸ¾</h2>
										<br>
										<h4>íˆ¬ê²Œë” í« ì€ ì¤‘ê³„ì—…ì²´ì…ë‹ˆë‹¤ ê²°ì œ/ì˜ˆì•½ê´€ë ¨ì€ í•´ë‹¹ ì—…ì²´ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.</h4>

										<br> <br> <br>

										<!-- ê²€ìƒ‰ê¸°ëŠ¥ ì‹œì‘  -->
										<form class="row gy-2 gx-3 align-items-center" id="btn">
											<div class="col-auto">
												<select id="key" name="key">
													<option value="1">ì§€ì—­</option>
													<option value="2">ìˆ™ì†Œëª…</option>
												</select>
											</div>

											<div class="col-auto">
												<input class="form-control" type="text" id="val" name="val">
											</div>
											<div class="col-auto">
												<button type="button" class="btn btn-dark" id="Searchbtn"
													onclick="searchCall()">ê²€ìƒ‰</button>
											</div>
										</form>
										<!-- ê²€ìƒ‰ê¸°ëŠ¥ ë  -->

										<br> <br> <br>

										<!--ìˆ™ì†Œ ë°˜ë³µë¬¸ ìŠ¤íƒ€íŠ¸! -->
										<div class="row shop_wrapper" id="all">

											<div class="col-lg-4 col-md-4 col-sm-6 col-6 category"
												th:each="a:${accomo}" th:data-category="${a.category}">
												<div class="single_product">
													<div class="product_thumb">
														<a th:href="@{accomo(accomoNo=${a.accomoNo})}"> <img
															class="primary_img" th:src="${a.aphoto}" alt="tree">
														</a>


														<!--ìŠ¤í¬ë©ê¸°ëŠ¥ ì‹œì‘  -->
														<div class="product_action">
															<ul>
																<li class="wishlist"><a href="#"
																	data-tippy="Wishlist" data-tippy-inertia="true"
																	data-tippy-delay="50" data-tippy-arrow="true"
																	data-tippy-placement="left"> <input type="hidden"
																		th:value="${a.categoryId}" name="categoryId">
																		<input type="hidden" th:value="${a.accomoNo}"
																		name="boardNo"> <input type="hidden"
																		th:value="${session.user.userNo}" name="userNo">
																		<i class="icon-heart scrapBtn"></i>

																</a></li>
															</ul>
														</div>

														<!--ìŠ¤í¬ë©ê¸°ëŠ¥ ë  -->


														<div class="product_content grid_content text-center">
															<h4 class="product_name">ğŸ¶[[${a.name}]]</h4>
															<div class="price_box">
																<span class="current_price">ğŸ“¢[[${a.address}]]</span>
															</div>
															<div class="price_box">
																<span class="current_price">ğŸ’¸[[${a.price}]]ì›</span>
															</div>
															<div class="product_name">
																<span class="current_price">ğŸ‘€[[${a.hit}]]</span>
															</div>
														</div>
													</div>
												</div>
											</div>

											<!--ìˆ™ì†Œ ë°˜ë³µë¬¸ ë! -->


											<!-- ìŠ¤í¬ë© ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘ 20221005 ì†Œí˜„ ì¶”ê°€  -->
											<script>
											var token = $("meta[name='_csrf']").attr("content");
											var header = $("meta[name='_csrf_header']").attr("content");
																	    
											//ìŠ¤í¬ë© í•˜íŠ¸ë²„íŠ¼ í´ë¦­ì‹œ
																	    
											
											
											$("#all").on('click','.icon-heart', function() {
											
												alert('ìŠ¤í¬ë© í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')
														
												let categoryId = $(this).prev().prev().prev().val();//ìˆ™ì†Œì¹´í…Œê³ ë¦¬ h
												console.log('ì¹´í…Œê³ ë¦¬->',$(this).prev().prev().prev().val());
												
												let boardNo =$(this).prev().prev().val();//boardNo ìˆ™ì†Œë²ˆí˜¸
												console.log('ë³‘ì›ë²ˆí˜¸->',$(this).prev().prev().val());
												
												
												let userNo = $(this).prev().val();// userNo ìœ ì €ë²ˆí˜¸
												console.log('ìœ ì €ë²ˆí˜¸->',$(this).prev().val());
												
											
												//ìŠ¤í¬ë© ë“±ë¡ ì²˜ë¦¬
												$.ajax({
											         url:'/ScrapInsert.do',
											         type:'post',
											         beforeSend : function(xhr){
															xhr.setRequestHeader(header, token)},
											     	 dataType:'json',
											         data:{categoryId:categoryId, userNo:userNo, boardNo:boardNo},
											         success:function(data,idx,arr){
													console.log(arr); 
								
														alert("ìŠ¤í¬ë©ì´ ì„±ê³µ ì  ìœ¼ë¡œ ë“±ë¡ ë˜ì—ˆìŠµë‹ˆë‹¤.")
												
											       }
											    })
													
											})
											
											
											
											
											
											</script>







											<script>
											
											$("#Searchbtn").on('click', searchCall)
											
											var token = $("meta[name='_csrf']").attr("content");
											var header = $("meta[name='_csrf_header']").attr("content");
										
											function searchCall() {
												  let key = document.getElementById('key').value;
											      let val = document.getElementById('val').value;
											      console.log(key,",",val)
											     
											     
											     $.ajax({
											    	url : "accomoajaxSearch",
											    	method : 'get',//method
											    	data : {'key' : key, 'val' : val},
											    	dataType : 'json',
											    	success : function(response) {
														console.log('2',response);
														htmlView(response);
													},
													error : function () {
														console.log('ì˜¤ë¥˜');Â Â Â 
													}
											     });
											     
											     function htmlView(data) {
														//htmlë¡œ ë³€í™˜í•´ì„œ ì›í•˜ëŠ” ìœ„ì¹˜ì— ì¶œë ¥í•˜ë„ë¡ êµ¬í˜„
														
														 $(".shop_wrapper>div").remove();Â 
														 //$(".host").remove();Â 
														 
													
														 for(a of data) {
														/* 	 if(date.length==0){
																 var result = `
																	 <!--ìˆ™ì†Œ ë°˜ë³µë¬¸ ìŠ¤íƒ€íŠ¸! -->
																	 <div class="col-lg-4 col-md-4 col-sm-6 col-6 ">
																			<div class="single_product" id="point">
																				<div class="product_thumb">
																						<h1>ë‚˜ì¤‘ì— ì¤€ë¹„ ã…‡ã…‹?</h1>
																				</div>
																			</div>
																		</div>
																		`
															 }else{ */
														
															 var result = `
																 <!--ìˆ™ì†Œ ë°˜ë³µë¬¸ ìŠ¤íƒ€íŠ¸! -->
																 <div class="col-lg-4 col-md-4 col-sm-6 col-6 ">
																		<div class="single_product" id="point">
																			<div class="product_thumb">
																				<a href="accomo?accomoNo=${a.accomoNo}">
																					<img class="primary_img" src="${a.aphoto}" alt="tree">
																				</a>
																				<!--ìŠ¤í¬ë©ê¸°ëŠ¥ ì‹œì‘  -->
																				<div class="product_action">
																					<ul>
																						<li class="wishlist">
																						<a href="#"
																							data-tippy="Wishlist" data-tippy-inertia="true"
																							data-tippy-delay="50" data-tippy-arrow="true"
																							data-tippy-placement="left"><i
																								class="icon-heart icons"></i></a></li>
																					</ul>
																				</div>
																				<!--ìŠ¤í¬ë©ê¸°ëŠ¥ ë  -->
																				<div class="product_content grid_content text-center">
																					<h4 class="product_name">ğŸ¶${a.name}</h4>
																					<div class="price_box">
																						<span class="current_price">ğŸ¶${a.address}</span>
																					</div>
																					<div class="price_box">
																						<span class="current_price">ğŸ¶${a.price}ì›</span>
																					</div>
																					<div class="product_name">
																						<span class="current_price">ğŸ‘€${a.hit}</span>
																					</div>
																				</div>
																			</div>
																		</div>
																	</div>
																	`
																	
																	
																	<!--ìˆ™ì†Œ ë°˜ë³µë¬¸ ë! -->
																 $(".shop_wrapper").append(result);Â 	
																//$(".host").append(".card-body");
														 
														 		};	
														 			/* } */
														 	};
														     
														};
											</script>

										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</article>
</body>
</html>