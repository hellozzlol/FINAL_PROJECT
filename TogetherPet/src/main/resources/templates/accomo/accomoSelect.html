<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout2}">
<head>
<meta charset="UTF-8">
<title>ë°˜ë ¤ë™ë¬¼ë™ë°˜ìˆ™ì†Œ</title>

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
<script>
	/*-----------------------
	//ë³„ì  í´ë¦­ ì‹œ ë³„ì  ì¡°ì •	
	-------------------------*/
	$(document).on('click', '.fa-star', function(evt) {
		console.log('ì‹¤í–‰');
		var idxS = $(this).index();
		console.log(idxS);
		for (var i = 0; i <= idxS; i++) { // ë³„ì  ì±„ìš°ê¸°
			$('.star-point').children().eq(i).css('color', '#FFB300');
		}
		for (var i = 4; i > idxS; i--) { // ë³„ì  ë¹„ìš°ê¸°
			$('.star-point').children().eq(i).css('color', '#d3d3d3');
		}
		$('#star').val(idxS + 1);
		$('.star-txt').html('<span>' + (idxS + 1) + '</span><span>ì </span>');

	});
</script>

<style>
.btn {
	margin: auto;
	display: block;
}

/*================ ë³„ì  ===============*/
.star-point:before {
	display: none;
}

.star-point {
	font-size: 54px;
	text-align: center;
	letter-spacing: -3px;
}

.star-point .fa-star {
	cursor: pointer;
	color: #d3d3d3;
}

.star-txt {
	height: 41px;
	padding-top: 8px;
	text-align: center;
	color: #999;
	font-size: 16px;
}

.star-txt>span:first-child {
	color: #ff385c;
	font-size: 27px;
	font-weight: 700;
}

.star-txt>span:nth-child(2) {
	color: #ff385c;
	font-size: 18px;
	font-weight: 700;
}
.reviewstar {
	font-size: xx-large;
	color: #ffd700;
}
.reviewbtn{
width: 100px;
height: 300px;
}
</style>
</head>
<body>
	<article layout:fragment="content">
		<!--shop  area start-->
		<div class="shop_section shop_reverse">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 col-md-12">

						<!--breadcrumbs area start-->
						<div class="breadcrumb_content" style="margin: 50px;">
							<ul>
								<li><a href="index.html">home</a></li>
								<li>Petinfo</li>
								<li>accomo</li>
							</ul>
						</div>
						<!--breadcrumbs area end-->

						<div class="shop_banner d-flex align-items-center"
							data-bgimg="assets/img/bg/acco1.jpg">
							<div class="shop_banner_text">
								
							</div>
						</div>

						<!--product details start-->
						<section class="product_details mb-135">
							<div class="container">
								<div class="row">
									<div class="col-lg-6 col-md-6">
										<div class="product_zoom_gallery">
											<div class="zoom_gallery_inner d-flex">

												<div class="product_zoom_main_img" th:each="a:${accomo}">
													<div class="product_zoom_thumb">
														<img th:src="${a.aphoto}" alt="tab-thumb">
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="col-lg-6 col-md-6">
										<div class="product_d_right" th:each="a:${accomo}">

											<h1 th:text="${a.name}">ìˆ™ì†Œì´ë¦„</h1>
											<div class="product_ratting_review d-flex align-items-center">
												
												<div class="product_review">
													<ul>
														<li>ğŸ“[[${#lists.size(rEviewSelectList)}]]ê°œì˜ ë¦¬ë·°ê°€ ìˆìŠµë‹ˆë‹¤.</li>
													</ul>
												</div>
											</div>

											<div class="product_desc">
												<p>ê°€ê²© : [[${a.price}]](1ë°•)</p>
											</div>

											<div class="product_sku">
												<p>
													<span> ì£¼ì†Œ: </span> [[${a.address}]]
												</p>

												<p>
													<span> ì •ë³´: </span> [[${a.info}]]
												</p>

											</div>
											<input type="hidden" th:value="${a.accomoNo}" name="boardNo" id="accomoNo">
										</div>
									</div>
								</div>
							</div>
						</section>
						<!--product details end-->

						<!--product info start-->
						<div class="product_d_info mb-118">
							<div class="container">
								<div class="row">
									<div class="col-12">
										<div class="product_d_inner">
											<div class="product_info_button border-bottom">
												<ul class="nav" role="tablist">
													<li><a class="active" data-toggle="tab" href="#info"
														role="tab" aria-controls="info" aria-selected="false">ìˆ™ì†Œì •ë³´</a>
													</li>
													<li><a data-toggle="tab" href="#reviews" role="tab"
														aria-controls="reviews" aria-selected="false">í›„ê¸° </a></li>


												</ul>
											</div>
											<div class="tab-content">
												<div class="tab-pane fade show active" id="info"
													role="tabpanel">
													<div class="product_info_content">
														<p style="font-weight: bold">ê³µì§€ì‚¬í•­</p>
														<ul>
															<li style="font-weight: bold">í”„ëŸ°íŠ¸ ë‚´ ì†ì†Œë…ì œ êµ¬ë¹„ ì™„ë£Œ / ë°©ì—­
																ì‹¤ì‹œ</li>
														</ul>
														<br>
														<p style="font-weight: bold">ê¸°ë³¸ì •ë³´</p>
														<ul>
															<li>ì…ì‹¤ : 15:00 | í‡´ì‹¤ : 11:00</li>
															<li>22ì‹œ ì´í›„ ì…ì‹¤ ì‹œ ì‚¬ì „ë¬¸ì˜ (í•„ìˆ˜)</li>
															<li>ë¬´ë£Œ Wi-Fi</li>
															<li>ì£¼ì°¨ê°€ëŠ¥</li>
														</ul>
														<br>
														<p style="font-weight: bold">ì• ê²¬ ì…ì‹¤ ì•ˆë‚´</p>
														<ul>
															<li style="font-weight: bold">ì• ê²¬ë™ë°˜ì„ ì›í•  ê²½ìš° ì‚¬ì „ ë¬¸ì˜ ë° ìƒë‹´
																í•„ìˆ˜</li>
															<li>1ë§ˆë¦¬ 40,000ì› (5kg ë¯¸ë§Œ)</li>
															<li>ìµœëŒ€ 2ë§ˆë¦¬ ë™ë°˜ì…ì‹¤ ê°€ëŠ¥</li>
															<li style="font-weight: bold">í˜„ì¥ê²°ì œ</li>
														</ul>
														<br>
														<p style="font-weight: bold">ì·¨ì†Œ ë° í™˜ë¶ˆ ê·œì •</p>
														<ul>
															<li>ìˆ™ë°•ì¼ ê¸°ì¤€ 30ì¼ì „ : 100% í™˜ë¶ˆ</li>
															<li>ìˆ™ë°•ì¼ ê¸°ì¤€ 29~14ì¼ì „ : 90% í™˜ë¶ˆ</li>
															<li>ìˆ™ë°•ì¼ ê¸°ì¤€ 13~6ì¼ì „ : 70% í™˜ë¶ˆ</li>
															<li>ìˆ™ë°•ì¼ ê¸°ì¤€ 5ì¼ì „ : 50% í™˜ë¶ˆ</li>
															<li>ìˆ™ë°•ì¼ ê¸°ì¤€ 4ì¼ì „ : 20% í™˜ë¶ˆ</li>
															<li>ìˆ™ë°•ì¼ ê¸°ì¤€ 3~1ì¼ì „ : 10% í™˜ë¶ˆ</li>
															<li>ìˆ™ë°•ì¼ ë‹¹ì¼ ë° No-show : í™˜ë¶ˆë¶ˆê°€</li>
															<li>ì·¨ì†Œ, í™˜ë¶ˆ ì‹œ ìˆ˜ìˆ˜ë£Œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
														</ul>
														<br>
														<p style="font-weight: bold">ì½”ë¡œë‚˜ ì‚¬íšŒì  ê±°ë¦¬ë‘ê¸° ê³µì§€</p>
														<ul>
															<li style="font-weight: bold">ì½”ë¡œë‚˜ë¡œ ì¸í•´ ì •ë¶€ì§€ì¹¨ì´ ê³„ì†í•´ì„œ ë³€ë™ë 
																ìˆ˜ ìˆìœ¼ë©°, ê·¸ë¡œ ì¸í•œ ì·¨ì†Œ ë° í™˜ë¶ˆ ë³€ê²½ ë“±ì€ íœì…˜ ê·œì •ì— ë”°ë¼ ì²˜ë¦¬ë  ìˆ˜ ìˆìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</li>
														</ul>

													</div>
												</div>
								
								<!-- ë¦¬ë·° -->
								<div class="tab-pane fade" id="reviews" role="tabpanel">
									<div class="reviews_wrapper">
										<h2>[[${#lists.size(rEviewSelectList)}]]ê°œì˜ ë¦¬ë·°ê°€ ìˆìŠµë‹ˆë‹¤.</h2>
										
										<!-- ë§í’ì„  ëª¨ì–‘ div -->
										<div class="reviews_comment_box" th:each="re:${rEviewSelectList}">
											<div class="comment_thmb">
												<img src="assets/img/blog/comment2.jpg" alt="">
											</div>
											<div class="comment_text">
												<div class="reviews_meta">
													<p>
														<strong th:switch="${re.star}">
															<i class="reviewstar" th:case="5">â˜…â˜…â˜…â˜…â˜…</i>
															<i class="reviewstar" th:case="4">â˜…â˜…â˜…â˜…â˜†</i>
															<i class="reviewstar" th:case="3">â˜…â˜…â˜…â˜†â˜†</i>
															<i class="reviewstar" th:case="2">â˜…â˜…â˜†â˜†â˜†</i>
															<i class="reviewstar" th:case="1">â˜…â˜†â˜†â˜†â˜†</i>
															<i class="reviewstar" th:case="0">â˜†â˜†â˜†â˜†â˜†</i>
														</strong><br>
														
														<strong>[[${re.nickname}]]</strong> 
														<a>  [[${re.dt}]]</a>
													</p>
													<span>[[${re.content}]]</span>
												</div>
											</div>
										</div>
										<!-- ë§í’ì„  ëª¨ì–‘ div -->
										
										<!-- ajaxë¡œ ëŒ“ê¸€ ë‹¬ë¦¬ëŠ” ë¶€ë¶„ -->
										<div class="reviews_comment_box" id="ajaxReviewDiv"></div>
										
										
										<div class="product_review_form">	
												<div class="product_ratting mb-10">
													<h2 class="star-txt">ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h2>
													<div class="star-point">
														<i class="fa-star">â˜…</i> <i class="fa-star">â˜…</i> <i
															class="fa-star">â˜…</i> <i class="fa-star">â˜…</i> <i
															class="fa-star">â˜…</i>
													</div>
													
													<!-- ë³„ì  ìˆ«ì -->
													<input type="hidden" id="star" name="star" value="0" />
		
												</div>
											
												<div class="row">
													<div class="comment_title col-12">
														<h2>ìˆ™ì†Œí›„ê¸°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”</h2>
														<!-- ë§í’ì„  ëª¨ì–‘ div -->
														<div class="reviews_comment_box">
															<div class="comment_thmb">
																<img src="assets/img/blog/comment2.jpg" alt="">
															</div>
															<div class="comment_text">
																<div class="reviews_meta">
																	<p>
																		<strong th:value="${session.user.nickname}"></strong> 
																	</p>
																	<span>
																		<textarea id="reviewcontent" name="content" rows="8" cols="8" style="border:none;"></textarea>
																	</span>
																</div>
															</div>
															<button id="reviewbtn" type="button" class="reviewbtn">ì‘ì„±í•˜ê¸°</button>
														</div>
														<!-- ë§í’ì„  ëª¨ì–‘ div -->
													</div>
												</div>
										    </div>
									    </div>
								   </div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!--product info end-->
					</div>
				</div>
				<br> <br> <br>
				<div id="btn">
					<button type="button" class="btn btn-dark"
						onclick="location.href='accomoList'">ëª©ë¡ê°€ê¸°</button>
				</div>
			</div>
		</div>
		
		
		<script>
		
		/*-----------------------
		//ëŒ“ê¸€ ì‘ì„±
		-------------------------*/				
		$('#reviewbtn').on("click", function() {
				var token = $("meta[name='_csrf']").attr("content");
				var header = $("meta[name='_csrf_header']").attr("content");
			
				var title = "ìˆ™ì†Œ í›„ê¸°";
				var content = $("#reviewcontent").val();
				var star = $("#star").val();
				var boardNo = $("#accomoNo").val();
				var categoryId = "a";
				var groupNo = 1;
				var userNo = $("#userNo").val();

			 	$.ajax({
						url : "accomoReviewInsert",
						type:'post',
						beforeSend: function (xhr) {
							xhr.setRequestHeader(header, token)
						},
						data : {
								title:title,
								content:content,
								star:star,
								boardNo: boardNo,
								categoryId:categoryId,
								groupNo:groupNo,
								userNo:userNo
								},
						success : function(result){
							$("#ajaxReviewDiv").append(
								`<div class="comment_thmb">
											<img src="assets/img/blog/comment2.jpg" alt="">
								</div>
								<div class="comment_text">
											<div class="reviews_meta">
												<p>
													<strong id="starbox">
													</strong><br>
													
													<strong>${result.nickname}</strong> 
													<a> ${result.dt}</a>
												</p>
												<span>${result.content}</span>
											</div>
										</div>
								</div>`
							);
							
							var rank = `${result.star}`
							console.log(rank)
							
							if(rank == 5) {
								$("#starbox").append(`<i class="reviewstar">â˜…â˜…â˜…â˜…â˜…</i>`);
							} else if(rank ==4) {
								$("#starbox").append(`<i class="reviewstar">â˜…â˜…â˜…â˜…â˜†</i>`);
							} else if(rank ==3) {
								$("#starbox").append(`<i class="reviewstar">â˜…â˜…â˜…â˜†â˜†</i>`);
							} else if(rank ==2) {
								$("#starbox").append(`<i class="reviewstar">â˜…â˜…â˜†â˜†â˜†</i>`);
							} else if(rank ==1) {
								$("#starbox").append(`<i class="reviewstar">â˜…â˜†â˜†â˜†â˜†</i>`);
							} else if(rank ==0) {
								$("#starbox").append(`<i class="reviewstar">â˜†â˜†â˜†â˜†â˜†</i>`);
							}

							alert("ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.")
						
						},
						error : function(result){
							alert("ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")
						}
				}); 
			 	
		})
		
		
		</script>

	</article>


</body>
</html>